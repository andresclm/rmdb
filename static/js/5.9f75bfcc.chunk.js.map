{"version":3,"sources":["assets/caret-down.svg","pages/Discover/components/Dropdown/index.tsx","pages/Discover/queries.ts","pages/Discover/index.tsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","_ref","svgRef","title","props","className","viewBox","ref","ForwardRef","forwardRef","Dropdown","memo","label","options","useState","value","setValue","handleSelect","event","onBlur","onChange","disabled","hidden","map","option","name","getDiscover","_key","a","page","searchQuery","fetch","BASE_URL","API_KEY","response","json","data","movies","results","getGenres","genresQuery","genresOptions","genres","genre","id","toString","sortByData","Discover","genresData","useQuery","staleTime","Infinity","useInfiniteQuery","getFetchMore","_lastPage","allPages","isLoading","fetchMore","isFetchingMore","undefined","Loading","flat","movie","MovieCard","imageUrl","poster_path","language","original_language","releaseDate","release_date","voteAvg","vote_average","height","onClick"],"mappings":"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","file":"static/js/5.9f75bfcc.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n});\n\nvar SvgCaretDown = function SvgCaretDown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"fill-current h-4 w-4\",\n    viewBox: \"0 0 20 20\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCaretDown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/caret-down.c314f8d1.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, memo } from \"react\";\nimport { ReactComponent as CaretDown } from \"../../../../assets/caret-down.svg\";\n\ntype DropdownProps = {\n  label: string;\n  options?: { value: string; name: string }[];\n};\n\nconst DropdownView = ({\n  label,\n  options = [],\n}: DropdownProps): React.ReactElement => {\n  const [value, setValue] = useState(\"\");\n  function handleSelect(\n    event:\n      | React.FocusEvent<HTMLSelectElement>\n      | React.ChangeEvent<HTMLSelectElement>\n  ): void {\n    setValue(event.target.value);\n  }\n\n  return (\n    <div className=\"relative mt-2 sm:m-0 sm:mr-1 w-full\">\n      <select\n        value={value}\n        className=\"appearance-none cursor-pointer w-full bg-transparent border border-gray-800 text-gray-800 py-2 sm:py-1 pl-3 pr-6 lowercase focus:outline-none\"\n        onBlur={handleSelect}\n        onChange={handleSelect}\n        disabled={options.length === 0}\n      >\n        <option value=\"\" disabled hidden>\n          {label}\n        </option>\n        <option value=\"\">All</option>\n        {options.map((option) => (\n          <option value={option.value} key={option.value}>\n            {option.name}\n          </option>\n        ))}\n      </select>\n      <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-800\">\n        <CaretDown />\n      </div>\n    </div>\n  );\n};\n\nexport const Dropdown = memo(DropdownView);\n","import { MovieItemAttr } from \"../../components/Carousel/types\";\nimport { API_KEY, BASE_URL } from \"../../apiConfig\";\nimport { GenreAttr } from \"./types\";\n\nexport const getDiscover = async (\n  _key: \"discover\",\n  page = 1\n): Promise<MovieItemAttr[]> => {\n  // Query\n  const searchQuery = fetch(\n    `${BASE_URL}discover/movie?api_key=${API_KEY}&page=${page}`\n  );\n\n  // Request\n  const response = await searchQuery;\n  const data = (await response.json()) as { results: MovieItemAttr[] };\n\n  // Formatter\n  const movies = data.results;\n\n  return movies;\n};\n\nexport const getGenres = async (): Promise<\n  { name: string; value: string }[]\n> => {\n  // Query\n  const genresQuery = fetch(`${BASE_URL}genre/movie/list?api_key=${API_KEY}`);\n\n  // Request\n  const response = await genresQuery;\n  const data = (await response.json()) as { genres: GenreAttr[] };\n\n  // Formatter\n  const genresOptions = data.genres.map((genre) => ({\n    value: genre.id.toString(),\n    name: genre.name,\n  }));\n\n  return genresOptions;\n};\n","import React from \"react\";\nimport { useInfiniteQuery, useQuery } from \"react-query\";\nimport { MovieCard } from \"../../components/MovieCard\";\nimport { Dropdown } from \"./components/Dropdown\";\nimport { Loading } from \"../../components/Loading\";\nimport { getDiscover, getGenres } from \"./queries\";\n\n// Filters\nconst sortByData = [\n  { value: \"popularity.asc\", name: \"Popularity Ascending\" },\n  { value: \"release_date.desc\", name: \"Release Date Descending\" },\n  { value: \"release_date.asc\", name: \"Release Date Ascending\" },\n  { value: \"revenue.desc\", name: \"Revenue Descending\" },\n  { value: \"revenue.asc\", name: \"Revenue Ascending\" },\n  { value: \"vote_average.desc\", name: \"Vote Average Descending\" },\n  { value: \"vote_average.asc\", name: \"Vote Average Ascending\" },\n];\n\nconst Discover = (): React.ReactElement => {\n  // Filters\n  const { data: genresData } = useQuery(\"genres\", getGenres, {\n    staleTime: Infinity,\n  });\n\n  // Search movies\n  const { data, isLoading, fetchMore, isFetchingMore } = useInfiniteQuery(\n    \"discover\",\n    getDiscover,\n    {\n      staleTime: Infinity,\n      getFetchMore: (_lastPage, allPages) => allPages.length + 1,\n    }\n  );\n  function handleLoadMore(): void {\n    void fetchMore();\n  }\n\n  return isLoading || data === undefined ? (\n    <Loading />\n  ) : (\n    <section className=\"px-5 max-w-6xl md:pt-24 md:mx-4 lg:mx-auto\">\n      <div className=\"flex flex-col md:flex-row justify-around items-center\">\n        <h2 className=\"lg:pl-16 uppercase text-lg text-gray-800 font-light tracking-wider\">\n          Movies\n        </h2>\n        <div className=\"pt-5 md:p-0 flex flex-wrap sm:flex-no-wrap justify-center max-w-xl\">\n          <Dropdown label=\"genre\" options={genresData} />\n          <Dropdown label=\"sort by\" options={sortByData} />\n        </div>\n      </div>\n      <div className=\"pt-12 pb-20 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6 grid-flow-row-dense\">\n        {data.flat().map((movie) => (\n          <MovieCard\n            key={movie.id}\n            id={movie.id}\n            imageUrl={movie.poster_path}\n            title={movie.title}\n            language={movie.original_language}\n            releaseDate={movie.release_date}\n            voteAvg={movie.vote_average}\n          />\n        ))}\n      </div>\n      <div className=\"flex justify-center items-center h-20 mb-20\">\n        {isFetchingMore ? (\n          <Loading height=\"h-auto\" />\n        ) : (\n          !isLoading && (\n            <button\n              onClick={handleLoadMore}\n              className=\"uppercase text-gray-800 tracking-widest transition-colors duration-200 hover:text-gray-500\"\n            >\n              Load More\n            </button>\n          )\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Discover;\n"],"sourceRoot":""}